\documentclass[parskip=full,11pt,twoside]{scrartcl}
\usepackage[utf8]{inputenc}

\title{Blockchain-basiertes E-Voting}
\author{Artem Vasilev, Achim Kriso, Philipp Schaback, Tim Fröhlich, David Schuldes}

% section numbers in margins:
\renewcommand\sectionlinesformat[4]{\makebox[0pt][r]{#3}#4}

% header & footer
\usepackage{scrlayer-scrpage}
\lofoot{\today}
\refoot{\today}
\pagestyle{scrheadings}

\usepackage[sfdefault,light]{roboto}
\usepackage[T1]{fontenc}
\usepackage[german]{babel}
\usepackage[yyyymmdd]{datetime} % must be after babel
\renewcommand{\dateseparator}{-} % ISO8601 date format
\usepackage{hyperref}
\usepackage{amsmath} % for $\text{}$
\usepackage[nameinlink]{cleveref}
\crefname{figure}{Abb}{Abb}
\usepackage[section]{placeins}
\usepackage{xcolor}
\usepackage{graphicx}
\hypersetup{
	pdftitle={Pflichtenheft},
	bookmarks=true,
}
\usepackage{csquotes}

\usepackage{pflichtenheft}
\usepackage{glossaries}
\makeglossaries
\include{glossary}


\begin{document}
\maketitle

\pagebreak

\tableofcontents
\pagebreak
%%%%%%%%%%%%%%
\section{Produktübersicht}
Ziel des Projektes ist die Bildung eines verlässlichen und sicheren Wahlsystems. Das System soll Kosten minimieren, gleichzeitig Sicherheit und Transparenz der Wahlen gewährleisten. Kostenminimierung wird mit Anwendung von elektronischen Wahlen erreicht. Die \glslink{Blockchain}{Blockchain-Technologie} garantiert Wahlsicherheit.
\section{Zielbestimmung}

\subsection{Musskriterien}

\criterium{Stimmabgabe}{crt:vote}
Jeder \gls{Waehler} muss einen \glslink{Kandidat}{Kandidaten} wählen können.

\criterium{Erstellung von Wahl}{crt:create}
Der \gls{Wahlleiter} muss eine \gls{Wahl} erstellen können

\criterium{Stimmenübermittlung}{crt:send}
Die Übermittlung einer \gls{Stimme} muss öffentlich erfolgen und nachverfolgbar sein.

\criterium{Stimmenauszählung}{crt:count}
Die \glslink{Auszaehlungsverfahren}{Auszählung} der \glslink{Stimme}{Stimmen} erfolgt automatisch auf Anfrage des \glslink{Wahlleiter}{Wahlleiters}.

\criterium{Graphische Benutzeroberfläche für Wahlleiter}{crt:gui-es}
Die \gls{Benutzeroberflaeche} des \glslink{Wahlleiter}{Wahlleiters} erlaubt es eine \gls{Wahl} zu erstellen, zu starten, zu beenden und automatisiert auszuzählen. 

\criterium{Graphische Benutzeroberfläche für Wähler}{crt:gui-voter}
Die \gls{Benutzeroberflaeche} des \glslink{Waehler}{Wählers} bietet Informationen über die \glslink{Kandidat}{Kandidaten}, erlaubt es für einen \glslink{Kandidat}{Kandidaten} zu stimmen und bietet Erklärungen zum Ablauf der Wahl.

\subsection{Sollkriterien}

\subsection{Kannkriterien}

\criteriumOptional{Weitere Auszählverfahren}{crt:tally}
Bereitstellung von verschiedenen \gls{Auszaehlungsverfahren} wie First-past-the-post, \gls{Instant-Runoff-Voting}

\criteriumOptional{Geheime Wahlen}{crt:secret}
Bereitstellung von Wahlen bei denen die Stimme einzelner Teilnehmer nicht öffentlich ersichtlich sind

\criteriumOptional{Verteilung von Zugangsdaten}{crt:certdist}
Funktionalität die es dem \gls{Wahlleiter} erlaubt Zugangsdaten für die \gls{Wahl} per Email an die \gls{Waehler} zu verteilen

\criteriumOptional{Automatisches Wahlende}{crt:autoend}
Einstellbarkeit einer weiteren Endbedingung deren Erfüllung die \gls{Wahl} automatisch beendet \\(z.B: 75\% aller registrierten Teilnehmer müssen abgestimmt haben)

\subsection{Abgrenzungskriterien}
\criteriumNot{Unveränderbarkeit einer Stimme}{cst:nochange}
Sobald der \gls{Waehler} eine Stimme abgegeben hat, kann er diese nicht mehr ändern. Das gilt insbesondere auch wenn die \gls{Wahl} noch läuft.
\criteriumNot{Kein Speichern von Wahlverhalten}{cst:nomem}
Das Wahlverhalten eines \glslink{Waehler}{Wählers} ist nicht mehr nachvollziehbar, nachdem die \gls{Wahl} abgeschlossen ist.
\criteriumNot{Vertrauen in den Wahlleiter}{cst:trustes}
Die Legitimität der \gls{Wahl} basiert auf der Vertrauenswürdigkeit des \glslink{Wahlleiter}{Wahlleiters}.
%%%%%%%%%%%
\section{Produkteinsatz}

\subsection{Anwendungsbereiche}
Durchführung von kleinen Wahlen oder Abstimmungen im Rahmen von Vereinen, Firmen oder Parlamenten.

\subsection{Zielgruppen}
\begin{enumerate}
  \item \gls{Waehler}
  \item \gls{Wahlleiter}
\end{enumerate}

\section{Produktumgebung}

\subsection{Software}
Das Programm soll für das Erstellen und Verwalten der \gls{Blockchain} das Hyperledger Fabric Framework verwenden, welches eine auf dem Consensus-Verfahren basierende Blockchain-Implementierung bietet.
Hierfür werden für die Hauptanwendung das Hyperledger Fabric Java SDK verwendet werden und für  das erstellen von \glslink{Chaincode}{Chaincodes} soll Go verwendet werden.
Um die Funktionalität von Hyperledger Fabric zu gewährleisten wird ebenso eine Installation von GoLang benötigt.

\subsection{Hardware}
Es werden Computer für die Wähler und den \gls{Wahlleiter} benötigt. Diese Computer müssen mit einer Internetverbindung ausgestattet sein und Java 7 installiert haben.

\subsection{Orgware}
\begin{enumerate}
\item Installation der Software, die für das Funktionieren von Hyperledger erforderlich ist. (PS: siehe http://hyperledger-fabric.readthedocs.io/en/release-1.1/prereqs.html)
\item Anlegen des Netzwerks, wenn es keines gibt.
\end{enumerate}

\subsection{Schnittstellen}
Die \gls{Wahl} des \glslink{Waehler}{Wählers} wird im \gls{Ledger} gespeichert und über das Netzwerk verteilt.

\section{Funktionale Anforderungen}

\functionality{Erstellung einer Wahl}{fnc:create}
\fulfills{crt:create}
\fulfills{crt:gui-es}
Der \gls{Wahlleiter} kann eine neue \gls{Wahl} erstellen. Es existiert immer nur eine \gls{Wahl} gleichzeitig.
Der \gls{Wahlleiter} wird durch die Erstellung geführt. Es sind folgende Schritte notwendig:

\functionality{Allgemeine Konfiguration der Wahl}{fnc:params}
\fulfills{crt:create}
\fulfills{crt:gui-es}
\fulfills{crt:tally}
\fulfills{crt:secret}
Der \gls{Wahlleiter} legt den Namen und einen Beschreibungstext der \gls{Wahl} fest.
Er setzt den Start- und Endzeitpunkt der Wahl.
Die Festlegung eines \glslink{Auszaehlungsverfahren}{Auszählungsverfahrens} ist möglich, ebenso die Privatheit der Wahl.

\functionality{Hinzufügen von Wählern}{fnc:voter-add}
\fulfills{crt:create}
\fulfills{crt:gui-es}
\fulfills{crt:certdist}
Der \gls{Wahlleiter} fügt die \gls{Waehler} mit Vor- und Nachname hinzu. Das System generiert automatisch die erforderlichen \glspl{Zertifikat}. Die \glspl{Zertifikat} werden im Netzwerk verteilt. Die hinzugefügten \gls{Waehler} sind zur Teilname berechtigt. \\
Der \gls{Wahlleiter} kann außerdem die \glspl{Zertifikat} per Email an die \gls{Waehler} senden. % Wie vermerkt man hier das das Teil des Kannkriteriums ist?

\functionality{Hinzufügen von Kandidaten}{fnc:candidate-add}
\fulfills{crt:create}
\fulfills{crt:gui-es}
Der \gls{Wahlleiter} fügt die \glslink{Kandidat}{Kandidaten} mit Vor- und Nachname hinzu. Das System propagiert die \glslink{Kandidat}{Kandidaten} automatisch an das Netzwerk

\functionality{Aktivierung der Wahl}{fnc:activate}
\fulfills{crt:create}
\fulfills{crt:gui-es}
Der \gls{Wahlleiter} bestätigt seine Einstellungen zur Wahl. Mit der Bestätigung beginnt die Übertragung der Informationen in das Netzwerk. Die \gls{Wahl} startet zum festgelegten Zeitpunkt.

\functionality{Wahlfunktion für \gls{Waehler}}{fnc:vote}
\fulfills{crt:vote}
\fulfills{crt:send}
\fulfills{crt:gui-voter}
Der Wähler kann an der laufenden Wahl teilnehmen. Er durchläuft dazu folgende Schritte:

\functionality{Authentifizierung mittels Zertifikat}{fnc:auth}
\fulfills{crt:vote}
\fulfills{crt:gui-voter}
Der Wähler authentifiziert sich gegenüber dem Netzwerk mit seinem Zertifikat.
Ist er zur Wahl nicht berechtigt oder hat schon gewählt wird er darauf hingewiesen und abgemeldet.
Andernfalls kann er wählen.

\functionality{Auswählen eines Kandidaten}{fnc:choose}
\fulfills{crt:vote}
\fulfills{crt:gui-voter}
Dem Wähler stehen die vom \gls{Wahlleiter} festgelegten Kandidaten zur Auswahl.
Der Wähler kann einen der Kandidaten auswählen.
Er kann seine Auswahl beliebig oft ändern.

\functionality{Übermittlung der Stimme}{fnc:send}
\fulfills{crt:vote}
\fulfills{crt:send}
Bestätigt er seine Wahl, so wird die Stimme in den \gls{Ledger} geschrieben.
Sie ist hiermit final übernommen und kann nicht länger geändert werden.

\functionality{Rückmeldung an den Wähler}{fnc:feedback}
\fulfills{crt:gui-voter}
Wenn die Stimme erfolgreich im \gls{Ledger} aufgenommen ist, erhält der Wähler eine Bestätigung über die GUI.
Sonst erhält der Wähler eine Benachrichtigung, dass seine Wahl fehlschlug.
Er kann dann zur Auswahl der Kandidaten zurückkehren und seine Stimme erneut abgeben.

\functionality{Beenden der Wahl}{fnc:end}
\fulfills{crt:count}
\fulfills{crt:autoend}
Die \gls{Wahl} endet zum eingestellten Zeitpunkt (und/oder bei Erreichen des zusätzlichen Kriteriums) automatisch. Stimmabgaben der \gls{Waehler} sind nicht länger möglich/gültig. Die Auswertung der \gls{Wahl} beginnt:

\functionality{Auszählung der Stimmen}{fnc:count}
\fulfills{crt:count}
Die Auszählung findet im Netzwerk statt. Das Ergebnis der Auszählung wird auf allen \glslink{Benutzeroberflaeche}{GUIs} dargestellt.

\section{Produktdaten}

Die Stimmabgaben der Wahlteilnehmer werden auf einem \gls{Ledger} gespeichert.
Die \glspl{Zertifikat} der \gls{Waehler} werden in Datenbanken im Netzwerk gespeichert.
Es werden keine weiteren \gls{Benutzerdaten} gespeichert.

\section{Produktleistungen}
Die Software muss die \gls{Wahl} eines jeden \glslink{Waehler}{Wählers}, der dazu autorisiert ist, zählen und hierbei nicht für Verfälschungen sorgen. \\*
Jede abgegebene \gls{Stimme} muss akkurat in der Auszählung der \gls{Wahl} vertreten sein. \\*
Die Software muss dem \gls{Waehler} deutlich machen ob seine \gls{Wahl} erfolgreich war oder nicht. \\*
Die Abgabe einer \gls{Stimme} sollte in einem kurzen Zeitraum geschehen, welcher 5 Minuten nicht überschreitet.
Hierbei soll die \glslink{Benutzeroberflaeche}{GUI} sofort reagieren und dem \gls{Benutzer} Rückmeldung über seine Aktion geben. \\*
Die Auszählung einer \gls{Wahl} sollte unter einer Stimmenzahl von 10.000 \glslink{Waehler}{Wählern} einen Tag nicht überschreiten. 


\section{Weitere Nicht-Funktionale Anforderungen}

\nonFunctionality{Einfache Benutzung}{nfc:design}
Die \gls{Wahl} sollte für einen \gls{Benutzer} mit nur geringen Computerkenntnissen möglich sein.

\nonFunctionality{Verifizieren der Wahlberechtigung}{nfc:design}
Es soll nur denjenigen Benutzern möglich sein an einer \gls{Wahl} teilzunehmen, welche die hierzu notwendigen Berechtigungen haben.

\nonFunctionality{Manipulation der Wahl}{nfc:design}
Es soll nicht möglich sein die \gls{Wahl} eines Anderen zu ändern, \glslink{Stimme}{Stimmen} zu löschen oder anderweitig das Ergebnis der \gls{Wahl} zu manipulieren.

\section{Qualitätsanforderungen}
\quality{Korrektheit der Wahlergebnisse}{qlt:correctness}
Sofern ein Wähler seine Stimme erfolgreich abgegeben hat, ist diese garantiert im Wahlergebnis enthalten ist. Sie wurde dem Kandidaten, für den gewählt wurde, angerechnet.
\quality{Protokollierung des Netzwerkes}{qlt:log}
Ereignisse und Probleme auf dem \gls{Netzwerk} werden in einer \gls{Logdatei} chronologisch protokolliert. Diese \gls{Logdatei} ist für den \gls{Wahlleiter} einsehbar.
\quality{Unveränderbarkeit der Wahl}{qlt:immutability}
Sobald die Wahl vom \gls{Wahlleiter} einmal aufgesetzt wurde, können die Einstellungen dieser Wahl von niemandem (insbesondere vom \gls{Wahlleiter}) mehr verändert werden.
\quality{Vermeidung von unlogischen Eigenschaften der Wahl}{qlt:illogical}
Während dem festlegen der Einstellungen der Wahl wird der \gls{Wahlleiter} auf Probleme in der \gls{Konfiguration} hingewiesen. Folgende Fehler werden berücksichtigt:
	\begin{itemize}
		\item Kein oder nur ein Kandidat wurde eingetragen.
		\item Kein oder nur ein Wähler wurde eingetragen.
		\item Einem Wähler oder Kandidaten wurde kein Name gegeben.
		\item Der Wahl wurde kein Name gegeben.
		\item Die Wahl endet vor oder demselben Zeitpunkt an dem sie startet.
	\end{itemize}
\quality{Verhinderung des \glslink{Double-Spending-Problem}{Double-Spending-Problems}}{qlt:ds}
Jeder Wähler kann nur einmal seine Stimme erfolgreich abgeben. Eine erneute Abgabe seiner Stimme resultiert in einer Fehlermeldung auf der Wähler GUI, die ihn auf das Problem hinweist.
\quality{Vermeidung von ungewollten Enthaltungen}{qlt:abstain}
Falls ein Wähler seine Wahl auf seiner GUI bestätigen möchte, ohne das dieser für einen der Kandidaten gestimmt hat, wird eine Warnung angezeigt die darauf hinweist.
\quality{Warnungen bei Netzwerkproblemen}{qlt:nw-problems}
Bei Problemen die Stimme eines Wählers in das \gls{Netzwerk} zu übertragen, wird dieser Wähler in seiner GUI darüber informiert. Er hat dann die Möglichkeit seine Stimme erneut abzugeben. 

\section{Globale Testfälle}
\test{Ablauf einer Wahl}{}
\tests{fnc:create}
\tests{fnc:params}
\tests{fnc:voter-add}
\tests{fnc:candidate-add}
\tests{fnc:activate}
\tests{fnc:vote}
\tests{fnc:auth}
\tests{fnc:choose}
\tests{fnc:send}
\tests{fnc:feedback}
\tests{fnc:end}
\tests{fnc:count}

\teststep{\gls{Wahlleiter} \enquote{Fritz Müller} hat die \glslink{Benutzeroberflaeche}{GUI} geöffnet um eine neue \gls{Wahl} aufzusetzen.}
		{Fritz gibt den Namen \enquote{Vorstandswahl 2018} an und fügt eine passende Beschreibung hinzu.\\
		Fritz fügt \enquote{Max Mustermann}, \enquote{Anna Meier}, \enquote{Erich Schmitt} und 10 andere \gls{Waehler} hinzu.\\
		Zuletzt werden \enquote{Johannes Heinzhof}, \enquote{Wolfgang Rudolf} und \enquote{Sabine Scholl} als Wahlmöglichkeiten von Fritz festgelegt,}
		{Die \glspl{Zertifikat} für die alle zugelassenen \gls{Waehler} werden generiert.}	
	
\teststep{}
		{Fritz wählt aus, dass die \gls{Wahl} am 1. August 2018 beginnt und am 31. August 2018 endet. Er bestätigt seine Eingaben.}
		{Die \gls{Wahl} ist jetzt im \gls{Netzwerk} aktiv.}

\teststep{Max Mustermann startet die \gls{Waehler} \glslink{Benutzeroberflaeche}{GUI} am 1. August 2018}
		{Max gibt seinen Namen und sein Authentifizierungs \gls{Zertifikat} an.}
		{Die \glslink{Benutzeroberflaeche}{GUI} updatet sich und zeigt alle Wahlmöglichkeiten an}
		
\teststep{}
		{Max wählt \enquote{Sabine Scholl} aus den Wahlmöglichkeiten aus und bestätigt seine Wahl.}
		{Die \glslink{Benutzeroberflaeche}{GUI} schickt seine \gls{Stimme} ab und informiert ihn dass diese erfolgreich gezählt wurde.}
		
\teststep{Der 31. August 2018 ist erreicht.}
		{Die \gls{Wahl} beendet sich auf dem \gls{Netzwerk}.}
		{Die Wahlergebnisse können auf den \glslink{Benutzeroberflaeche}{GUIs} eingesehen werden.}
		
\test{Verhinderung von Angriffsversuchen auf die Wahl}{}
\tests{fnc:vote}
\teststep{Wiederholung des Schritte von T1 1.1-1.4}
		{Max startet erneut eine \gls{Waehler} \glslink{Benutzeroberflaeche}{GUI} und gibt seine Namen und \gls{Zertifikat} an.}
		{Die \glslink{Benutzeroberflaeche}{GUI} teilt ihm mit, dass seine \gls{Stimme} schon gegeben wurde und bricht den Wahlvorgang ab.}

\teststep{}
		{Max startet erneut eine \gls{Waehler} \glslink{Benutzeroberflaeche}{GUI} und gibt den Namen \enquote{Anna Meier} und sein ursprüngliches \gls{Zertifikat} an.}
		{Die \glslink{Benutzeroberflaeche}{GUI} teilt ihm mit, das sein \gls{Zertifikat} ungültig für den gegeben Namen ist und bricht den Wahlvorgang ab.}

\section{Spezielle Anforderungen an die Entwicklungsumgebung}
Zur Entwicklung werden die IntelliJ oder Eclipse IDE verwendet.
Zudem wird ein \gls{Linux} basiertes Betriebssystem verwendet.

\section{Glossar}
\printglossaries

\end{document}
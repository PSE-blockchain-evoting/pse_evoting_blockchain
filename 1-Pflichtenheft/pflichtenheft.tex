\documentclass[parskip=full,11pt,twoside]{scrartcl}
\usepackage[utf8]{inputenc}

\title{Blockchain-basiertes E-Voting}
\author{Artem Vasilev, Achim Kriso, Philipp Schaback, Tim Fröhlich, David Schuldes}

% section numbers in margins:
\renewcommand\sectionlinesformat[4]{\makebox[0pt][r]{#3}#4}

% header & footer
\usepackage{scrlayer-scrpage}
\lofoot{\today}
\refoot{\today}
\pagestyle{scrheadings}

\usepackage[sfdefault,light]{roboto}
\usepackage[T1]{fontenc}
\usepackage[german]{babel}
\usepackage[yyyymmdd]{datetime} % must be after babel
\renewcommand{\dateseparator}{-} % ISO8601 date format
\usepackage{hyperref}
\usepackage{amsmath} % for $\text{}$
\usepackage[nameinlink]{cleveref}
\crefname{figure}{Abb}{Abb}
\usepackage[section]{placeins}
\usepackage{xcolor}
\usepackage{graphicx}
\hypersetup{
	pdftitle={Pflichtenheft},
	bookmarks=true,
}
\usepackage{csquotes}

\usepackage{pflichtenheft}

\begin{document}
\maketitle

\pagebreak
%%%%%%%%%%%%%%
\section{Produktübersicht}
Ziel des Projektes ist die Bildung eines verlässlichen und sicheren Wahlsystems. Das System soll Kosten minimieren, gleichzeitig Sicherheit und Transparenz der Wahlen gewährleisten. Kostenminimierung wird mit Anwendung von elektronischen Wahlen erreicht. Die Block-Chain-Technologie garantiert Wahlsicherheit.
\section{Zielbestimmung}

\subsection{Musskriterien}

\criterium{Stimmabgabe}{crt:length}
Jeder Wähler muss einen Kandidaten wählen können.

\criterium{Erstellung von Wahl}{crt:length}
Der Wahlleiter muss eine Wahl erstellen können

\criterium{Stimmenübermittlung}{crt:length}
Die Übermittlung einer Stimme muss öffentlich erfolgen und nachverfolgbar sein.

\criterium{Stimmenauszählung}{crt:length}
Die Auszählung der Stimmen erfolgt automatisch auf Anfrage des Wahlleiters.

\criterium{Graphische Benutzeroberfläche}{crt:length}
Es muss zwei getrennte graphische Benutzeroberflächen geben. Die Benutzeroberfläche des Wahlleiters erlaubt es eine Wahl zu starten, zu beenden und automatisiert auszuzählen. Die Benutzeroberfläche des Wählers erlaubt es für einen der gegebenen Kandidaten zu stimmen und bietet Erklärungen zum Ablauf der Wahl. 

\criterium{Software-Architektur}{crt:length}
Die Software muss klar in Komponente aufgeteilt sein. Komponenten sind nur wohldefinierte Schnittstellen verbunden.
Kritische und unkritische Komponenten sind klar erkennbar.

\subsection{Sollkriterien}

\subsection{Kannkriterien}

\criteriumOptional{Weitere Auszählverfahren}{crt:tally}
Bereitstellung von verschiedenen Auszählverfahren wie First-past-the-post, Instant-Runoff-Voting

\criteriumOptional{Geheime Wahlen}{crt:secret}
Bereitstellung von Wahlen bei denen die Stimme einzelner Teilnehmer nicht öffentlich ersichtlich sind

\criteriumOptional{Verteilung von Zugangsdaten}{crt:certdist}
Funktionalität die es dem Wahlleiter erlaubt Zugangsdaten für die Wahl per Email an die Wähler zu verteilen

\criteriumOptional{Automatische Wahlende}{crt:autoend}
Einstellbarkeit einer Endbedingung deren Erfüllung die Wahl automatisch beendet \\(z.B: 75\% aller registrierten Teilnehmer müssen abgestimmt haben)

\subsection{Abgrenzungskriterien}

%%%%%%%%%%%
\section{Produkteinsatz}

\subsection{Anwendungsbereiche}
Verwaltung der Wahlen im Rahmen der Organisation, der Stadt, des Landes.

\subsection{Zielgruppen}
\begin{enumerate}
  \item Wähler.
  \item Netzwerkadministratoren.
\end{enumerate}

\subsection{Abgrenzungskriterien}
\begin{enumerate}
  \item Das Produkt muss mit minimalen Netzwerkadministration zu betreiben sein.
  \item Wähler soll keine besondere Fähigkeiten und Wissen  haben, um das System nutzen zu können.
  \item Wähler muss per Netz wählen. Dazu braucht man den Internet-Zugang.
\end{enumerate}

\section{Produktumgebung}

\subsection{Software}
Das Programm soll für das Erstellen und Verwalten der Blockchain das Hyperledger Fabric Framework verwenden, welches eine auf dem Consensus-Verfahren basierende Blockchain-Implementierung bietet.
Hierfür werden für die Hauptanwendung das Hyperledger Fabric Java SDK verwendet werden und für  das erstellen von Chaincodes soll Go verwendet werden.
Um die Funktionalität von Hyperledger Fabric zu gewährleisten werden ebenso eine Installation von node.js, npm sowie der GoLang und Python 2.7 benötigt.

\subsection{Hardware}
PC+Network.

\subsection{Orgware}
\begin{enumerate}
\item Installation der Software, die für das Funktionieren von Hyperledger erforderlich ist. (PS: siehe http://hyperledger-fabric.readthedocs.io/en/release-1.1/prereqs.html)
\item Anlegen des Netzwerks, wenn es keines gibt.
\end{enumerate}

\subsection{Schnittstellen}
Die Wahl des Wählers wird im Block-Chain gespeichert und über das Netzwerk verteilt.

\section{Funktionale Anforderungen}

\functionality{Wahlfunktion für einen Wähler bereitstellen}{nfc:design}
\begin{itemize}
	\item Ziel: Stimme für einen Kandidat abgeben.
	\item Das System überprüft, ob der Wahlprozess eingeleitet ist.  
	\begin{enumerate}
		\item Falls die Wahl eingeleitet ist: Es stehen mehrere Kandidaten zur Auswahl. Ein Wähler wählt einen Kandidaten. Er wird vom System aufgefordert seine Wahl zu bestätigen. Wenn ein Wähler seine Wahl bestätigt hat wird die Wahl in den Blockchain-Ledger eingefügt. Das System schließt seine Arbeit ab.
		\item Falls die Wahl nicht eingeleitet sind: Das System gibt dem Benutzer eine Informationsnachricht "Wahl hat nicht begonnen". Das System schließt seine Arbeit ab.
	\end{enumerate}
\end{itemize}

\functionality{Wahlleiterfunktionalität}{nfc:design}
\begin{itemize}
	\item Ziel: den Wahlprozess zu verwalten.
	\item Das System überprüft, ob der Wahlprozess begonnen ist.   
	\begin{enumerate}
		\item Falls die Wahl eingeleitet ist: Das System bietet dem Wahlleiter die Wahl zwischen den folgenden Möglichkeiten:
		\begin{enumerate}
			\item Berechnen der aktuellen Anzahl an Stimmen. (siehe 5.3)
			\item Beenden der Wahl. (siehe 5.4)
		\end{enumerate}
		\item Falls die Wahl nicht eingeleitet ist: Das System bietet dem Wahlleiter die Wahl zwischen den folgenden Möglichkeiten:
		\begin{enumerate}
			\item Kandidat hinzufügen. (siehe 5.6)
			\item Kandidat löschen. (siehe 5.7)
		\end{enumerate}
		\item Falls die Wahl schon abgeschlossen ist: Das System bietet dem Wahlleiter die Wahl zwischen den folgenden Möglichkeiten:
		\begin{enumerate}
			\item Berechnen der Anzahl an Stimmen. (siehe 5.3)
			\item Neue Wahl beginnen (siehe 5.2.2)
		\end{enumerate}
	\end{enumerate}
\end{itemize}

\functionality{Zählen der Stimmen}{nfc:design}
\begin{itemize}
	\item Ziel: berechnen die Anzahl der von Wähler gegebenen Stimmen.
	\item Das System gibt Informationen über jeden Kandidaten (Name, Nachname, Foto des Kandidaten) und die Anzahl der von jedem der Wähler erhaltenen Stimmen aus.
\end{itemize}


\functionality{Hinzufügen eines neuen Kandidaten}{nfc:design}
\begin{itemize}
	\item Ziel: Neuen Kandidaten in den Wahlprozess hinzufügen.
	\item Das System schlägt vor, Nachname, Vorname einzugeben und ein Foto des Kandidaten hochzuladen.
	\item Der Wahlleiter gibt den Nachnamen, den Namen ein und lädt das Foto des Kandidaten.
	\item Das System prüft die Daten auf Korrektheit.
	\begin{enumerate}
		\item Wenn die Daten nicht korrekt sind, informiert das System den Benutzer darüber und wechselt zu 5.2.
		\item Wenn die Daten korrekt sind, fordert das System eine Bestätigung an und fügt, falls bestätigt, die Informationen über den neuen Kandidaten hinzu.
	\end{enumerate}
	\item Dann Übergang zu 5.2.
\end{itemize}


\functionality{Erstellung einer Wahl}{nfc:design}
\begin{itemize}
	\item Ziel: Erzeugen einer Wahl.
	\item Das System fragt, ob der Netzwerkadministrator den Anfang der Wahl bestätigen will.
	Der Administrator stimmt zu oder lehnt ab.
	\begin{enumerate}
		\item Falls Wahlleiter stimmt zu: Das System erstellt neue Wahl (siehe 5.2)
		\item Falls Wahlleiter lehnt ab: Siehe 5.2
	\end{enumerate}
\end{itemize}


\functionality{Beenden der Wahl}{nfc:design}
\begin{itemize}
	\item Ziel: die Wahl beenden.
	\item Wenn der Wahlleiter eine Wahl beenden möchte, wird er vom System aufgefordert, seine Entscheidung zu bestätigen oder zu widerrufen.
	\begin{enumerate}
		\item Falls Wahlleiter stimmt zu: Das System stoppt den Wahlprozess. (Dann Übergang zu 5.2)
		\item Falls Wahlleiter ablehnt : Übergang zu 5.2
	\end{enumerate}
\end{itemize}


\functionality{Löschung von Kandidaten}{nfc:design}
\begin{itemize}
	\item Ziel: einen Kandidaten aus der Wahlkonfiguration entfernen (z.B, falls der Kandidat sich vor Beginn der Wahl geweigert hat teilzunehmen).
	\item Das System bietet eine Liste von Kandidaten.
	\item Der Wahlleiter wählt einen Kandidaten aus.
	\item Das System fordert zur Bestätigung auf, den Kandidaten zu entfernen.
	\item Wenn der Wahlleiter zustimmt, entfernt das System den Kandidaten.
	\item Dann Übergang zu 5.2.
\end{itemize}

\section{Produktdaten}

Die Stimmabgaben der Wahlteilnehmer sind jeweils auf einer eigenen Blockchain-Ledger gespeichert.
Es werden keine weiteren Benutzerdaten gespeichert.

\section{Produktleistungen}
Die Software muss die Wahl eines jeden Wählers, der dazu autorisiert ist, zählen und hierbei nicht für Verfälschungen Sorgen. \\*
Jede abgegebene Stimme muss akkurat in der Auszählung der Wahl vertreten sein. \\*
Die Software muss dem Wähler deutlich machen ob seine Wahl erfolgreich war oder nicht. \\*
Die Abgabe einer Stimme sollte in einem kurzen Zeitraum geschehen, welcher 5 Minuten nicht überschreitet.
Hierbei soll die GUI sofort reagieren und dem Benutzer Rückmeldung über seine Aktion geben. \\*
Die Auszählung einer Wahl sollte unter einer Stimmenzahl von 10.000 Wählern einen Tag nicht überschreiten. 


\section{Weiter Nicht-Funktionale Anforderungen}

\nonFunctionality{Einfache Benutzung}{nfc:design}
Die Wahl sollte für einen Benutzer mit nur geringen Computerkenntnissen möglich sein.

\nonFunctionality{Verifizieren der Wahlberechtigung}{nfc:design}
Es soll nur denjenigen Benutzern möglich sein an einer Wahl teilzunehmen, welche die hierzu Notwendigen Berechtigungen haben.

\nonFunctionality{Manipulation der Wahl}{nfc:design}
Es soll nicht möglich sein die Wahl eines Anderen zu ändern, Stimmen zu löschen oder Andernfalls das Ergebnis der Wahl zu manipulieren.

\section{Qualitätsanforderungen}
\begin{enumerate}
	\item \textbf{Korrektheit der Wahlergebnisse}: Jede gültige Stimme ist garantiert im Wahlergebnis enthalten.
	\item \textbf{Protokollierung des Netzwerkes}: Ereignisse und Probleme auf dem Blockchain Netzwerk, werden übersichtlich in einer Logdatei protokolliert. Diese Logdatei ist für den Wahlleiter einsehbar.
	\item \textbf{Unveränderbarkeit der Wahl}: Sobald die Wahl vom Wahlleiter einmal aufgesetzt wurde, können die Eigenschaften dieser Wahl von niemandem (insbesondere vom Wahlleiter) mehr verändert werden.
	\item \textbf{Vermeidung von sinnlosen Eigenschaften der Wahl}: Während dem Aufsetzen der Wahl wird der Wahlleiter auf eventuelle Fehler in der Konfiguration hingewiesen. (z.B Nur eine Wahlmöglichkeit, Fehlende Wähler, triviale Endbedingung der Wahl)
	\item \textbf{Verhinderung des Double-Spending-Problems}: Jeder Wähler kann nur einmal den Wahlvorgang erfolgreich durchlaufen. Bei einem zweiten Versuch kommt es zu einer entsprechenden Fehlermeldung auf der Wähler GUI.
	%Ich rede hier extra vom Wahlvorgang anstatt von Stimmen, da es bei manchen Wahlverfahren vorkommen könnte, das ein Wähler mehrere Stimmen hat.
	\item \textbf{Vermeidung von ungewollten Enthaltungen}: Falls ein Wähler seine Wahl bestätigen möchte ohne das dieser für einer der Wahlmöglichkeiten gestimmt hat, wird eine Warnung angezeigt.
	\item \textbf{Warnungen bei Netzwerkproblemen}: Bei Problemen die Stimme eines Wählers zu übertragen, wird dieser Wähler daraufhin informiert und die Möglichkeit geboten seine Stimme erneut zu übertragen. 
\end{enumerate}

\section{Globale Testfälle}
\test{Ablauf einer Wahl}{}

\teststep{Wahlleiter \enquote{Fritz Müller} hat die GUI geöffnet um eine neue Wahl aufzusetzen.}
		{Fritz gibt den Namen \enquote{Vorstandswahl 2018} an und fügt eine passende Beschreibung hinzu.\\
		Fritz fügt \enquote{Max Mustermann}, \enquote{Anna Meier}, \enquote{Erich Schmitt} und 10 andere Wähler hinzu.\\
		Zuletzt werden \enquote{Johannes Heinzhof}, \enquote{Wolfgang Rudolf} und \enquote{Sabine Scholl} als Wahlmöglichkeiten von Fritz festgelegt,}
		{Die Zertifikate für die alle zugelassenen Wähler werden generiert.}
		
\teststep{}
		{Fritz wählt aus, dass die Wahl am 1. August 2018 beginnt und am 31. August 2018 endet. Er bestätigt seine Eingaben.}
		{Die Wahl ist jetzt im Blockchain Netzwerk aktiv.}

\teststep{Max Mustermann startet die Wähler GUI am 1. August 2018}
		{Max gibt seinen Namen und sein Authentifizierungs Zertifikat an.}
		{Die GUI updatet sich und zeigt alle Wahlmöglichkeiten an}
		
\teststep{}
		{Max wählt \enquote{Sabine Scholl} aus den Wahlmöglichkeiten aus und bestätigt seine Wahl.}
		{Die GUI schickt seine Stimme ab und informiert ihn dass diese erfolgreich gezählt wurde.}
		
\teststep{Der 31. August 2018 ist erreicht.}
		{Die Wahl beendet sich auf dem Blockchain Netzwerk.}
		{Die Wahlergebnisse können auf den GUIs eingesehen werden.}
		
\test{Verhinderung von Angriffsversuchen auf die Wahl}{}

\teststep{Wiederholung des Schritte von T1 1.1-1.4}
		{Max startet erneut eine Wähler GUI und gibt seine Namen und Zertifikat an.}
		{Die GUI teilt ihm mit, dass seine Stimme schon gegeben wurde und bricht den Wahlvorgang ab.}

\teststep{}
		{Max startet erneut eine Wähler GUI und gibt den Namen \enquote{Anna Meier} und sein ursprüngliches Zertifikat an.}
		{Die GUI teilt ihm mit, das sein Zertifikat ungültig für den gegeben Namen ist und bricht den Wahlvorgang ab.}

\section{Spezielle Anforderungen an die Entwicklungsumgebung}
Zur Entwicklung werden die IntelliJ oder Eclipse IDE verwendet.
Zudem wird ein Linux basiertes Betriebssystem verwendet.

\section{Glossar}

\textbf{Wahl}:
\begin{enumerate}
	\item Eine Sammlung von Stimmen für die Bestimmung einer oder mehrerer Personen, Parteien o.Ä., die bestimmte Ämter oder Funktionen bekleiden sollen. \\*
	\item Das Abgeben einer Stimme für eine Person, Partei o.Ä
\end{enumerate}

\textbf{Wähler}:
Eine Person die bei einer Wahl eine bestimmte Partei, einen bestimmten Kandidaten o.Ä. wählt und die hierfür nötigen Berechtigungen hat.

\textbf{Benutzer}:
Eine Person welche mit der Software interagiert.

\textbf{First-past-the-post}:
Auszählungsverfahren, bei dem der Kandidat mit den meisten Stimmen gewinnt

\textbf{Instant-Runoff-Voting}:
Auszählungsverfahren, bei dem der Wähler die Kandidaten nach Präferenz ordnet.

\end{document}
